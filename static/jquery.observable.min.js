(function(f,k){function g(a){if(!this.data)return new g(a);this._data=a;return this}function h(a){if(!this.data)return new h(a);this._data=a;return this}function i(a,b){f([a]).triggerHandler("arrayChange",b)}function j(a){if("number"!==typeof a)throw"Invalid index.";}f.observable=function(a){return f.isArray(a)?new h(a):new g(a)};var l=[].splice;f.observable.Object=g;g.prototype={_data:null,data:function(){return this._data},setProperty:function(a,b){if(f.isArray(a))for(var e=0,c=a.length;e<c;e++){var d=
        a[e];this.setProperty(d.name,d.value)}else if("object"===typeof a)for(c in a)this.setProperty(c,a[c]);else{c=this._data;d=a;if(c&&d){for(var g=d.split("."),d=g.pop();c&&g.length;)c=c[g.shift()];d=[c,d]}else d=[];a=d[1];if(d=d[0])if(c=d[a],f.isFunction(c)&&(e=c,c=c.call(d)),c!=b)e?(e.call(d,b),b=e.call(d)):d[a]=b,f(d).triggerHandler("propertyChange",{path:a,value:b,oldValue:c})}return this}};f.observable.Array=h;h.prototype={_data:null,data:function(){return this._data},insert:function(a,b){j(a);1<
        arguments.length&&(b=f.isArray(b)?b:[b],0<b.length&&(l.apply(this._data,[a,0].concat(b)),i(this._data,{change:"insert",index:a,items:b})));return this},remove:function(a,b){j(a);if((b=b===k||null===b?1:b)&&-1<a){var e=this._data.slice(a,a+b);if(b=e.length)this._data.splice(a,b),i(this._data,{change:"remove",index:a,items:e})}return this},move:function(a,b,e){j(a);j(b);if(e=e===k||null===e?1:e){var c=this._data.slice(a,a+e);this._data.splice(a,e);this._data.splice.apply(this._data,[b,0].concat(c));
    i(this._data,{change:"move",oldIndex:a,index:b,items:c})}return this},refresh:function(a){var b=this._data.slice(0);l.apply(this._data,[0,this._data.length].concat(a));i(this._data,{change:"refresh",oldItems:b});return this}}})(jQuery);