this.jQuery&&jQuery.link||function(G,i){function Q(a){var c,b,d,e,g,f,j;g=a.target;var k=h(g);f=h.view(g);var x=f.ctx;j=x.beforeChange;if(g.getAttribute(l.linkAttr)&&(e=s(g,"to"))){d=H(g);c=I[d];c=h.isFunction(d)?d(g):c?k[c]():k.attr(d);if((!j||!(b=j.call(f,a)===y))&&c!==i)f=l.converters[e[2]],j=e[0],e=e[1],g={src:g,tgt:j,cnvtBack:f,path:e},f&&(c=f(c)),c!==i&&j&&(z(j).setProperty(e,c),x.afterChange&&x.afterChange.call(g,a)),a.stopPropagation();b&&a.stopImmediatePropagation()}}function R(a,c,b){var d,
        e;e=this.src;var g=this.tgt,f=h(g),j=this.attr||H(g,q),k=this.view.ctx;d=k.beforeChange;if(!d||!(c&&d.call(this,a,c)===y)){b=this.fn(e,this.view,l,b||S);h.isFunction(b)&&(b=b.call(e));if(d=0===j.lastIndexOf("css-",0)&&j.substr(4))(e=f.css(d)!==b)&&f.css(d,b);else if(d=I[j]){if(e=f[d]()!==b)f[d](b),"input"===g.nodeName.toLowerCase()&&f.blur()}else(e=f.attr(j)!==b)&&f.attr(j,b);c&&(e&&k.afterChange)&&k.afterChange.call(this,a,c)}}function T(a,c){var b=this.ctx,d=b.beforeChange;if(!d||d.call(this,a,
        c)!==y)this.onDataChanged(c),b.afterChange&&b.afterChange.call(this,a,c)}function A(a){var c,b=a.data;if(c=a._onArrayChange){if(c[1]===b)return;h([c[1]]).unbind(B,c[0])}h.isArray(b)&&(c=function(){T.apply(a,arguments)},h([b]).bind(B,c),a._onArrayChange=[c,b])}function H(a,c){var b=l.merge[a.nodeName.toLowerCase()];return b?c?b.to.toAttr:b.from.fromAttr:"html"}function S(a){return a}function C(a){var c,b,d;if(!a.render&&(a.onDataChanged=U,a.render=V,a.addViews=W,a.removeViews=X,a.content=Y,a.parent)){h.isArray(a.data)||
(a.nodes=[],a._lnk=0);b=a.parent.views;if(h.isArray(b)){c=a.index;for(d=b.length;c++<d-1;)z(b[c]).setProperty("index",c)}A(a)}return a}function U(a){if(a){var c=a.index,b=a.items;switch(a.change){case "insert":this.addViews(c,b);break;case "remove":this.removeViews(c,b.length);break;case "move":this.render();break;case "refresh":this.render()}}return q}function V(){var a=this.tmpl=J(this.tmpl),c=this.prevNode,b=this.nextNode,d=c.parentNode;a&&(h(this.nodes).remove(),this.removeViews(),this.nodes=
        [],h(c).after(a.render(this.data,this.ctx,this,this.path,!0)),d.removeChild(c.nextSibling),d.removeChild(b.previousSibling),v(d,this,b,0,i,i,c,0),A(this));return this}function W(a,c,b){var d=c.length,e=this.ctx,g=this.views;if(!a||g[a-1]){if(d&&(b=J(b||this.tmpl))){var d=a?g[a-1].nextNode:this.prevNode,g=d.nextSibling,f=d.parentNode;h(d).after(b.render(c,e,this,i,a));f.removeChild(d.nextSibling);f.removeChild(g.previousSibling);v(f,this,g,0,i,i,d,a)}return this}}function X(a,c){function b(a){var b,
        c=e[a],d=c.prevNode,l=c.nextNode,n=[d];if(l){b=b||s(l.parentNode,w);for((a=b.length)&&c.removeViews();a--;)if(b[a]===c){b.splice(a,1);break}for(;d!==l;)d=d.nextSibling,n.push(d);h(n).remove();c.data=i;A(c)}}var d,e=this.views;d=e.length;if(a===i)if(d===i){for(a in e)b(a);this.views={}}else{for(;d--;)b(d);this.views=[]}else if(c===i&&(d===i?(b(a),delete e[a]):c=1),c){for(d=a+c;d-- >a;)b(d);e.splice(a,c);if(d=e.length)for(;a<d;)z(e[a]).setProperty("index",a++)}return this}function Y(a){return a?h(a,
        this.nodes):h(this.nodes)}function v(a,c,b,d,e,g,f,j){var k,o,n,t,p,r,u,m=c,g=g||{};if(a=f||a){if(!f&&1===a.nodeType){0===d++&&m.nodes.push(a);if(u=a.getAttribute(l.linkAttr)){t=m._lnk++;o=m.links||m.tmpl.links;if(!(f=o[t])){f=o[t]={};for("}"!==u.charAt(u.length-1)&&(u=K+":"+u+(h.nodeName(a,"input")?":":"")+D);k=L.exec(u);){n=k[1];t=k[2];if(k[5]){if(!n&&(r=/^.*:([\w$]*)$/.exec(k[8])))if(r=r[1],o=r.length)t=k[2].slice(0,-o-1)+D;null===r&&(r=i)}f[n]=l.tmplFn(M+t+N,i,q);!n&&r!==i&&(f[n].to=r)}}for(n in f)Z(m.data||
        e,a,n,f[n],m)}a=a.firstChild}else a=a.nextSibling;for(;a&&a!==b;){if(1===a.nodeType)v(a,m,b,d,e,g);else if(8===a.nodeType&&(k=$.exec(a.nodeValue)))if(n=a.parentNode,k[1])if(m.nextNode=a,m.ctx.onAfterCreate&&m.ctx.onAfterCreate.call(m,m),k[2])m=c;else return a;else p=p||s(n,w,q),k[2]?(p.push(m=C(m.views[j])),j++,m.prevNode=a):(p.push(n=C(m.views[k[5]])),n.prevNode=a,a=v(a,n,b,0,i,i,i,0));else 0===d&&m.nodes.push(a);a=a.nextSibling}}}function Z(a,c,b,d,e){var g=[],f=function(){R.apply({tgt:c,src:a,
    attr:b,fn:d,view:e},arguments)};s(c,aa,q)[b]={srcs:g,hlr:f};f(i,i,function(a,b){g.push(a);d.to!==i&&(h.data(c,p).to=[a,b,d.to]);h.isArray(a)?h([a]).bind(B,function(){f()}):h(a).bind(O,f);return a})}function s(a,c,b){return(a=h.data(a,p)||b&&h.data(a,p,{view:[],link:{}}))?a[c]:{}}function J(a){if(""+a===a)for(var c=a.split("["),a=E[c.shift()];a&&c.length;)a=a.tmpls[c.shift().slice(0,-1)];return a}var L,M,K,D,N,h=G.jQuery,l=h.views,F=l.sub,y=!1,q=!0,o=l.topView,E=l.templates,z=h.observable,p="_jsvData",
        aa="link",w="view",O="propertyChange",B="arrayChange",I={value:"val",html:"html",text:"text"},ba=h.cleanData,ca=l.delimiters,$=/^(\/?)(?:(item)|(?:(tmpl)(?:\((.*),([^,)]*)\))?(?:\s+([^\s]+))?))$/,P=/^item|^tmpl(\(\$?[\w.,]*\))?(\s+[^\s]+)?$/;if(!h)throw"requires jQuery";if(!l)throw"requires JsRender";F.onStoreItem=function(a,c,b){c&&(b&&a===E)&&(b.link=function(a,c,g,f){h.link(a,c,g,f,b)},h.link[c]=function(){return b.link.apply(b,arguments)})};F.onRenderItem=function(a){return"<\!--item--\>"+a+"<\!--/item--\>"};
    F.onRenderItems=function(a,c,b,d){return"<\!--tmpl("+(c||"")+","+b+") "+d.name+"--\>"+a+"<\!--/tmpl--\>"};h.extend(l,{linkAttr:"data-link",merge:{input:{from:{fromAttr:function(a){return"checkbox"===a.type?a.checked:h(a).val()}},to:{toAttr:"value"}}},delimiters:function(a,c){ca(a,c);L=RegExp("(?:^|s*)([\\w-]*)("+l.rTag+")","g");M=a.charAt(0);K=a.charAt(1);D=c.charAt(0);N=c.charAt(1);return this}});h.extend({view:function(a,c){var a=""+a===a?h(a)[0]:a,b,d,e,g,f;g=G.document.body;var j=a;if(c)for(f=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                a.nextSibling||a.parentNode;f!==(a=a.firstChild||a.nextSibling||a.parentNode.nextSibling);){if(8===a.nodeType&&P.test(a.nodeValue)&&(d=h.view(a),d.prevNode===a))return d}else{a=a||g;if(h.isEmptyObject(o.views))b=o;else{for(;!(e=s(f=a.parentNode||g,w)).length;){if(!f||a===g){s(g.parentNode,w,q).push(b=o);break}a=f}for(!b&&a===g&&(b=o);!b&&a;){if(a===f){b=d;break}if(8===a.nodeType)if(/^\/item|^\/tmpl$/.test(a.nodeValue))for(g=e.length;g--;){if(d=e[g],d.nextNode===a){b=a===j&&d;a=d.prevNode;break}}else if(P.test(a.nodeValue))for(g=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            e.length;g--;)if(d=e[g],d.prevNode===a){b=d;break}a=a.previousSibling}b=b||h.view(f)}return b}},link:function(a,c,b,d,e){d=d||o;e=e&&(E[e]||(e.markup?e:h.templates(e)));b=b||d.ctx;b.link=q;a=h(a).bind("change",function(){Q.apply({tgt:c},arguments)});e&&a.empty().append(e.render(c,b,d));v(a[0],d,i,i,c,b)},cleanData:function(a){for(var c,b,d,e,g,f,j,i=a.length;i--;)if(b=a[i],f=h.data(b,p)){j=f.link;for(e in j){d=j[e];g=d.srcs;for(c=g.length;c--;)h(g[c]).unbind(O,d.hlr)}j=f.view;if(c=j.length)for(b=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       h.view(b);c--;)d=j[c],d.parent===b&&b.removeViews(d.index)}ba.call(h,a)}});l.delimiters("{{","}}");o._lnk=0;o.links=[];o.ctx.link=q;C(o)}(this);